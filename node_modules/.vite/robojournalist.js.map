{
  "version": 3,
  "sources": ["../robojournalist/index.js", "dep:robojournalist"],
  "sourcesContent": ["const ordinal = i => {\r\n\tif (i < 10) {\r\n\t\treturn [\r\n\t\t\t'',\r\n\t\t\t'first',\r\n\t\t\t'second',\r\n\t\t\t'third',\r\n\t\t\t'fourth',\r\n\t\t\t'fifth',\r\n\t\t\t'sixth',\r\n\t\t\t'seventh',\r\n\t\t\t'eighth',\r\n\t\t\t'ninth'\r\n\t\t][i];\r\n\t}\r\n\r\n\tconst j = i % 10;\r\n\tconst k = i % 100;\r\n\tif (j === 1 && k !== 11) {\r\n\t\treturn i + 'st';\r\n\t}\r\n\r\n\tif (j === 2 && k !== 12) {\r\n\t\treturn i + 'nd';\r\n\t}\r\n\r\n\tif (j === 3 && k !== 13) {\r\n\t\treturn i + 'rd';\r\n\t}\r\n\r\n\treturn i + 'th';\r\n};\r\n\r\nconst ordinalExcludingFirst = i => {\r\n\tif (i === 1) {\r\n\t\treturn '';\r\n\t}\r\n\r\n\treturn ordinal(i) + ' ';\r\n};\r\n\r\nconst numberWord = i => {\r\n\tif (i === Math.floor(i) && i >= 1 && i <= 9) {\r\n\t\treturn [\r\n\t\t\t'',\r\n\t\t\t'one',\r\n\t\t\t'two',\r\n\t\t\t'three',\r\n\t\t\t'four',\r\n\t\t\t'five',\r\n\t\t\t'six',\r\n\t\t\t'seven',\r\n\t\t\t'eight',\r\n\t\t\t'nine'\r\n\t\t][i];\r\n\t}\r\n\r\n\treturn i;\r\n};\r\n\r\nconst addAOrAn = n => {\r\n\tn = String(n);\r\n\tconst useAn = n === '11' || n === '18' || n[0] === '8' || n[0] === 'e';\r\n\treturn useAn ? 'an ' + n : 'a ' + n;\r\n};\r\n\r\n// https://stackoverflow.com/a/2901298/3347737\r\nconst numberWithCommas = x => x.toString().replace(/\\B(?=(\\d{3})+(?!\\d))/g, ',');\r\n\r\nconst possessive = s => {\r\n\tif (s[s.length - 1] === 's') {\r\n\t\treturn s + '\\'';\r\n\t}\r\n\r\n\treturn s + '\\'s';\r\n};\r\n\r\nconst createText = (template, dict) => {\r\n\t// This is based on Douglas Crockford's old json_parse https://github.com/douglascrockford/JSON-js/blob/03157639c7a7cddd2e9f032537f346f1a87c0f6d/json_parse.js\r\n\r\n\tif (typeof template !== 'string') {\r\n\t\tthrow new TypeError(`Expected a string, got ${typeof template}`);\r\n\t}\r\n\r\n\tlet at = 1;\r\n\tlet ch = template.charAt(0);\r\n\r\n\tconst getCh = function () {\r\n\t\t// Just to keep xo happy\r\n\t\treturn ch;\r\n\t};\r\n\r\n\tconst error = function (m) {\r\n\t\tthrow JSON.stringify({\r\n\t\t\tname: 'Robo-journalist error',\r\n\t\t\tmessage: m,\r\n\t\t\tat,\r\n\t\t\ttext: template\r\n\t\t});\r\n\t};\r\n\r\n\tconst next = function (c) {\r\n\t\t// If a c parameter is provided, verify that it matches the current character.\r\n\t\tif (c && c !== ch) {\r\n\t\t\terror('Expected \\'' + c + '\\' instead of \\'' + ch + '\\'');\r\n\t\t}\r\n\r\n\t\t// Get the next character. When there are no more characters,\r\n\t\t// return the empty string.\r\n\t\tch = template.charAt(at);\r\n\t\tat += 1;\r\n\t\treturn ch;\r\n\t};\r\n\r\n\tconst getValue = function (key) {\r\n\t\tconst parts = key.split('.');\r\n\t\tlet d = dict;\r\n\t\tfor (const part of parts) {\r\n\t\t\ttry {\r\n\t\t\t\td = d[part];\r\n\t\t\t} catch {\r\n\t\t\t\terror(`${key} is not in the data dictionary.`);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn d;\r\n\t};\r\n\r\n\tconst rpn = function (key) {\r\n\t\tconst tokens = key.split(' ');\r\n\t\tconst binaryOperators = {\r\n\t\t\t'+': (a, b) => a + b,\r\n\t\t\t'-': (a, b) => a - b,\r\n\t\t\t'*': (a, b) => a * b,\r\n\t\t\t'/': (a, b) => a / b,\r\n\t\t\t'<': (a, b) => a < b,\r\n\t\t\t'>': (a, b) => a > b,\r\n\t\t\t'<=': (a, b) => a <= b,\r\n\t\t\t'>=': (a, b) => a >= b,\r\n\t\t\t'===': (a, b) => a === b\r\n\t\t};\r\n\t\tconst unaryOperators = {\r\n\t\t\t'\\'': a => possessive(a),\r\n\t\t\t',': a => numberWithCommas(a),\r\n\t\t\t'.-2': a => (a / 100).toFixed(0) * 100,\r\n\t\t\t'.-1': a => (a / 10).toFixed(0) * 10,\r\n\t\t\t'.0': a => a.toFixed(0),\r\n\t\t\t'.1': a => a.toFixed(1),\r\n\t\t\t'.2': a => a.toFixed(2),\r\n\t\t\t'~abs': a => Math.abs(a),\r\n\t\t\t'~ord': a => ordinal(Number(a)),\r\n\t\t\t'~ord\\'': a => ordinalExcludingFirst(Number(a)),\r\n\t\t\t'~word': a => numberWord(Number(a)),\r\n\t\t\t'~aan': a => addAOrAn(a)\r\n\t\t};\r\n\t\tconst stack = [];\r\n\t\tfor (const token of tokens) {\r\n\t\t\tif (/^-?\\d+$/.test(token)) {\r\n\t\t\t\t// An integer literal\r\n\t\t\t\tstack.push(Number(token));\r\n\t\t\t} else if (token in binaryOperators) {\r\n\t\t\t\tconst b = Number(stack.pop());\r\n\t\t\t\tconst a = Number(stack.pop());\r\n\t\t\t\tstack.push(binaryOperators[token](a, b));\r\n\t\t\t} else if (token in unaryOperators) {\r\n\t\t\t\tconst a = stack.pop();\r\n\t\t\t\tstack.push(unaryOperators[token](a));\r\n\t\t\t} else if (token.charAt(0) === '^') {\r\n\t\t\t\tstack[stack.length - 1] = getValue(token.slice(1))(stack[stack.length - 1]);\r\n\t\t\t} else {\r\n\t\t\t\tstack.push(getValue(token));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tif (stack.length !== 1) {\r\n\t\t\terror('Invalid RPN');\r\n\t\t}\r\n\r\n\t\treturn stack[0];\r\n\t};\r\n\r\n\tconst eitherOr = function (which) {\r\n\t\tnext('?');\r\n\t\tconst first = parse();\r\n\t\tnext(':');\r\n\t\tconst second = parse();\r\n\t\tnext('}');\r\n\t\treturn which ? first : second;\r\n\t};\r\n\r\n\tconst braced = function () {\r\n\t\tnext('{');\r\n\t\tif (ch === ':') {\r\n\t\t\t// {:} adds a colon to the output\r\n\t\t\tnext(':');\r\n\t\t\tnext('}');\r\n\t\t\treturn ':';\r\n\t\t}\r\n\r\n\t\tif (ch === '?') {\r\n\t\t\t// {?} adds a colon to the output\r\n\t\t\tnext('?');\r\n\t\t\tnext('}');\r\n\t\t\treturn '?';\r\n\t\t}\r\n\r\n\t\tlet varName = '';\r\n\t\twhile (getCh()) {\r\n\t\t\tif (ch === '}') {\r\n\t\t\t\tnext('}');\r\n\t\t\t\treturn rpn(varName);\r\n\t\t\t}\r\n\r\n\t\t\tif (ch === '?') {\r\n\t\t\t\treturn eitherOr(rpn(varName));\r\n\t\t\t}\r\n\r\n\t\t\tvarName += ch;\r\n\t\t\tnext();\r\n\t\t}\r\n\r\n\t\terror('Braces not closed');\r\n\t};\r\n\r\n\tconst parse = function () {\r\n\t\tlet result = '';\r\n\t\twhile (getCh()) {\r\n\t\t\tif (ch === ':' || ch === '}') {\r\n\t\t\t\treturn result;\r\n\t\t\t}\r\n\r\n\t\t\tif (ch === '{') {\r\n\t\t\t\tresult += braced();\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tresult += ch;\r\n\t\t\tnext();\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\t};\r\n\r\n\tconst result = parse();\r\n\tif (ch !== '') {\r\n\t\terror(`Didn't expect '${ch}'`);\r\n\t}\r\n\r\n\treturn result;\r\n};\r\n\r\nexport default createText;\r\n", "import d from \"./node_modules/robojournalist/index.js\";export default d;"],
  "mappings": "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",
  "names": []
}
